<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Ocean Breeze Hotel - Booking.com</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <!-- Flatpickr JS -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="header-bg text-white shadow">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center">
                <a href="#" class="text-3xl font-bold flex items-center mb-4 sm:mb-0">
                    <i class="fas fa-hotel nav-icon" aria-hidden="true"></i>
                    Ocean Breeze Hotel
                </a>
                <div class="flex flex-wrap items-center gap-4">
                    <div class="relative dropdown">
                        <button id="currencyBtn" class="text-white hover:text-gray-200 flex items-center" aria-label="Select currency" aria-expanded="false" aria-controls="currency-menu">
                            <i class="fas fa-dollar-sign nav-icon"></i> <span id="currencyLabel">USD</span>
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="currency-menu" class="dropdown-menu absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg py-2 z-10 hidden">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-currency="USD">USD - US Dollar</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-currency="EUR">EUR - Euro</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-currency="KES">KES - Kenyan Shilling</a>
                        </div>
                    </div>
                    <div class="relative dropdown">
                        <button id="languageBtn" class="text-white hover:text-gray-200 flex items-center" aria-label="Select language" aria-expanded="false" aria-controls="language-menu">
                            <i class="fas fa-globe nav-icon"></i> <span id="languageLabel">English</span>
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="language-menu" class="dropdown-menu absolute right-0 mt-2 w-48 bg-white border rounded-lg shadow-lg py-2 z-10 hidden">
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-lang="en">English</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-lang="fr">Français</a>
                            <a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100" data-lang="sw">Swahili</a>
                        </div>
                    </div>
                    <a href="#" class="text-white hover:text-gray-200 flex items-center"><i class="fas fa-user nav-icon"></i> Sign in</a>
                    <a href="#" class="booking-blue text-white px-4 py-2 rounded-md flex items-center"><i class="fas fa-user-plus nav-icon"></i> Register</a>
                </div>
            </div>
            <div class="mt-4 flex items-center">
                <div class="star-rating text-2xl" aria-label="4-star hotel">
                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                </div>
                <span class="ml-2 text-lg" data-i18n="star_hotel">4-star hotel</span>
            </div>
            <div class="mt-6 bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
                <form id="searchForm" class="search-form flex flex-col md:flex-row md:space-x-4">
                    <div class="flex-1 mb-4 md:mb-0">
                        <label for="dates" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="check_in_out">Check-in – Check-out</label>
                        <input type="text" id="dates" name="dates" class="w-full border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Select dates" required aria-label="Select check-in and check-out dates">
                    </div>
                    <div class="flex-1 mb-4 md:mb-0">
                        <label for="guests-rooms" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="guests_rooms">Guests & Rooms</label>
                        <input type="text" id="guests-rooms" class="w-full border border-gray-300 px-4 py-3 cursor-pointer" readonly value="2 Guests, 1 Room" aria-label="Select guests and rooms">
                        <div id="guests-rooms-dropdown" class="hidden absolute bg-white border rounded-lg shadow-lg p-4 mt-2 w-64 z-10">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700" data-i18n="guests">Guests</label>
                                <select id="guests" class="w-full border border-gray-300 rounded-md px-2 py-1 text-gray-800">
                                    <option value="1">1 Guest</option>
                                    <option value="2" selected>2 Guests</option>
                                    <option value="3">3 Guests</option>
                                    <option value="4">4 Guests</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700" data-i18n="rooms">Rooms</label>
                                <select id="rooms" class="w-full border border-gray-300 rounded-md px-2 py-1 text-gray-800">
                                    <option value="1" selected>1 Room</option>
                                    <option value="2">2 Rooms</option>
                                    <option value="3">3 Rooms</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-end">
                        <button type="submit" class="w-full md:w-auto booking-yellow text-gray-800 font-semibold px-6 py-3 rounded-full btn-show-prices" data-i18n="search">Search</button>
                    </div>
                </form>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-2">
        <nav aria-label="Breadcrumb">
            <ol class="flex flex-wrap space-x-2 text-sm text-gray-600">
                <li><a href="#" class="hover:text-blue-600" data-i18n="home">Home</a></li>
                <li>></li>
                <li><a href="#" class="hover:text-blue-600">Kenya</a></li>
                <li>></li>
                <li><a href="#" class="hover:text-blue-600">Nairobi</a></li>
                <li>></li>
                <li class="text-gray-800">Ocean Breeze Hotel</li>
            </ol>
        </nav>
    </div>

    <div class="container mx-auto px-4 py-8 md:flex md:space-x-8">
        <aside class="md:w-1/4 mb-8 md:mb-0">
            <div class="sticky top-4 bg-white p-6 rounded-xl shadow-sm border border-gray-200">
                <h3 class="text-lg font-bold text-gray-800 mb-4" data-i18n="filter_by">Filter by</h3>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="price_per_night">Price per night</label>
                    <input type="range" min="50" max="500" value="500" class="w-full" id="priceFilter" aria-label="Filter by price per night">
                    <span id="priceValue" class="text-sm text-gray-600" data-price="50-500">USD 50 - 500</span>
                </div>
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="sort_by">Sort by</label>
                    <select id="sortBy" class="w-full border border-gray-300 rounded-md px-2 py-1 text-gray-800" aria-label="Sort rooms">
                        <option value="price-asc" data-i18n="price_low_high">Price: Low to High</option>
                        <option value="price-desc" data-i18n="price_high_low">Price: High to Low</option>
                        <option value="rating-desc" data-i18n="rating_high_low">Rating: High to Low</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="amenities">Amenities</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" value="wifi"> <span data-i18n="wifi">Wi-Fi</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" value="breakfast"> <span data-i18n="breakfast">Breakfast</span>
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" class="mr-2" value="pool"> <span data-i18n="pool">Pool</span>
                        </label>
                    </div>
                </div>
            </div>
        </aside>

        <main class="md:w-3/4">
            <section class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-8">
                <h1 class="text-2xl font-bold text-gray-800 mb-2">Ocean Breeze Hotel</h1>
                <div class="flex items-center mb-4">
                    <div class="star-rating text-lg" aria-label="4-star hotel">
                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                    </div>
                    <span class="ml-2 text-gray-600" data-i18n="star_hotel">4-star hotel</span>
                </div>
                <p class="text-gray-600 mb-4">123 Ocean Drive, Nairobi, Kenya</p>
                <button onclick="openMapModal()" class="text-blue-600 hover:underline flex items-center" aria-label="See hotel on map" data-i18n="see_on_map">
                    <i class="fas fa-map-marker-alt mr-1"></i> See on map
                </button>
            </section>

            <section>
                <h2 class="text-2xl font-bold text-gray-800 mb-6" data-i18n="available_rooms">Available Rooms</h2>
                <div id="roomList" class="space-y-6">
                    <div id="spinner" class="hidden spinner"></div>
                </div>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mt-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="guest_reviews">Guest Reviews</h2>
                <div class="flex items-center mb-4">
                    <span class="text-2xl font-bold text-white bg-blue-800 rounded px-3 py-1 mr-2">8.7</span>
                    <span class="text-gray-700" data-i18n="excellent_reviews">Excellent • 1,234 reviews</span>
                    <span class="ml-2 text-blue-600 text-sm genius-badge" data-i18n="verified_reviews">Verified guest reviews</span>
                </div>
                <div class="space-y-4">
                    <div class="border-b pb-4">
                        <p class="text-gray-600 italic" data-i18n="review_1">"Amazing stay! The staff were incredibly friendly, and the room was spotless."</p>
                        <p class="text-gray-800 font-semibold mt-2">Jane D. • May 2025</p>
                    </div>
                    <div class="border-b pb-4">
                        <p class="text-gray-600 italic" data-i18n="review_2">"Great location and fantastic amenities. The pool was a highlight!"</p>
                        <p class="text-gray-800 font-semibold mt-2">Mark S. • April 2025</p>
                    </div>
                </div>
                <a href="#" class="text-blue-600 hover:underline mt-4 inline-block" data-i18n="show_all_reviews">Show all reviews</a>
                <p class="text-gray-600 text-sm mt-4" data-i18n="trusted_reviews">Trusted by over 70 million reviews worldwide</p>
            </section>

            <section class="bg-white p-6 rounded-xl shadow-sm border border-gray-200 mt-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="about_hotel">About Ocean Breeze Hotel</h2>
                <p class="text-gray-600 mb-4" data-i18n="hotel_description">Nestled in the heart of Nairobi, Ocean Breeze Hotel offers luxurious accommodations with stunning city views, modern amenities, and exceptional service. Perfect for business or leisure travelers.</p>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-6">
                    <img src="https://images.unsplash.com/photo-1596436889106-be35e843f974?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Hotel Lobby" class="w-full h-32 object-cover rounded-lg">
                    <img src="https://images.unsplash.com/photo-1566073771259-6a8506099945?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Hotel Pool" class="w-full h-32 object-cover rounded-lg">
                    <img src="https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Hotel Room" class="w-full h-32 object-cover rounded-lg">
                    <img src="https://images.unsplash.com/photo-1578683014728-903d55d23783?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" alt="Hotel Suite" class="w-full h-32 object-cover rounded-lg">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-700 mb-2" data-i18n="amenities">Amenities</h3>
                        <ul class="text-gray-600 text-sm">
                            <li><i class="fas fa-wifi mr-2"></i> <span data-i18n="wifi">Free Wi-Fi</span></li>
                            <li><i class="fas fa-swimming-pool mr-2"></i> <span data-i18n="pool">Outdoor Pool</span></li>
                            <li><i class="fas fa-spa mr-2"></i> <span data-i18n="spa">Spa & Wellness Center</span></li>
                            <li><i class="fas fa-concierge-bell mr-2"></i> <span data-i18n="room_service">24/7 Room Service</span></li>
                            <li><i class="fas fa-dumbbell mr-2"></i> <span data-i18n="fitness">Fitness Center</span></li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-700 mb-2" data-i18n="contact">Contact</h3>
                        <p class="text-gray-600"><i class="fas fa-map-marker-alt mr-2"></i> 123 Ocean Drive, Nairobi, Kenya</p>
                        <p class="text-gray-600"><i class="fas fa-phone mr-2"></i> +254 123 456 789</p>
                        <p class="text-gray-600"><i class="fas fa-envelope mr-2"></i> info@oceanbreezehotel.com</p>
                        <button onclick="openMapModal()" class="text-blue-600 hover:underline mt-2 flex items-center" aria-label="See hotel on map" data-i18n="see_on_map">
                            <i class="fas fa-map-marker-alt mr-1"></i> See on map
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="bookingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden modal">
        <div class="bg-white rounded-lg p-6 w-full max-w-md">
            <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="book_stay">Book Your Stay</h2>
            <form id="bookingForm">
                <div class="mb-4">
                    <label for="roomName" class="block text-sm font-medium text-gray-700" data-i18n="room">Room</label>
                    <input type="text" id="roomName" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" readonly>
                </div>
                <div class="mb-4">
                    <label for="checkIn" class="block text-sm font-medium text-gray-700" data-i18n="check_in">Check-in</label>
                    <input type="text" id="checkIn" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" readonly>
                </div>
                <div class="mb-4">
                    <label for="checkOut" class="block text-sm font-medium text-gray-700" data-i18n="check_out">Check-out</label>
                    <input type="text" id="checkOut" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" readonly>
                </div>
                <div class="mb-4">
                    <label for="guests" class="block text-sm font-medium text-gray-700" data-i18n="guests">Guests</label>
                    <input type="number" id="guests" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" readonly>
                </div>
                <div class="mb-4">
                    <label for="roomsCount" class="block text-sm font-medium text-gray-700" data-i18n="number_of_rooms">Number of Rooms</label>
                    <select id="roomsCount" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800">
                        <option value="1">1 Room</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="guestName" class="block text-sm font-medium text-gray-700" data-i18n="full_name">Full Name</label>
                    <input type="text" id="guestName" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" required>
                </div>
                <div class="mb-4">
                    <label for="guestEmail" class="block text-sm font-medium text-gray-700" data-i18n="email">Email</label>
                    <input type="email" id="guestEmail" class="w-full border border-gray-300 rounded-md px-3 py-2 text-gray-800" required>
                </div>
                <div class="flex justify-end space-x-4">
                    <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 rounded-md" data-i18n="cancel">Cancel</button>
                    <button type="submit" class="booking-blue text-white px-4 py-2 rounded-md btn-show-prices" data-i18n="proceed_checkout">Proceed to Checkout</button>
                </div>
            </form>
        </div>
    </div>

    <div id="mapModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden modal map-modal">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="hotel_location">Ocean Breeze Hotel Location</h2>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3988.815093295356!2d36.82194631475529!3d-1.286389999054327!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMcKwMTcnMTAuMCJTIDM2wrA0OSc0Mi4zIkU!5e0!3m2!1sen!2sus!4v1634567890123" allowfullscreen aria-label="Map of Ocean Breeze Hotel"></iframe>
            <div class="mt-4 flex justify-between">
                <img src="https://via.placeholder.com/200x100?text=Static+Map" alt="Static map of Ocean Breeze Hotel" class="h-24">
                <button onclick="closeMapModal()" class="px-4 py-2 text-gray-600 rounded-md" aria-label="Close map" data-i18n="close">Close</button>
            </div>
        </div>
    </div>

    <script>
        const translations = {
            en: {
                check_in_out: "Check-in – Check-out",
                guests_rooms: "Guests & Rooms",
                guests: "Guests",
                rooms: "Rooms",
                search: "Search",
                home: "Home",
                filter_by: "Filter by",
                price_per_night: "Price per night",
                sort_by: "Sort by",
                price_low_high: "Price: Low to High",
                price_high_low: "Price: High to Low",
                rating_high_low: "Rating: High to Low",
                amenities: "Amenities",
                wifi: "Wi-Fi",
                breakfast: "Breakfast",
                pool: "Pool",
                available_rooms: "Available Rooms",
                guest_reviews: "Guest Reviews",
                excellent_reviews: "Excellent • 1,234 reviews",
                verified_reviews: "Verified guest reviews",
                review_1: "Amazing stay! The staff were incredibly friendly, and the room was spotless.",
                review_2: "Great location and fantastic amenities. The pool was a highlight!",
                show_all_reviews: "Show all reviews",
                trusted_reviews: "Trusted by over 70 million reviews worldwide",
                about_hotel: "About Ocean Breeze Hotel",
                hotel_description: "Nestled in the heart of Nairobi, Ocean Breeze Hotel offers luxurious accommodations with stunning city views, modern amenities, and exceptional service. Perfect for business or leisure travelers.",
                see_on_map: "See on map",
                star_hotel: "4-star hotel",
                book_stay: "Book Your Stay",
                room: "Room",
                check_in: "Check-in",
                check_out: "Check-out",
                number_of_rooms: "Number of Rooms",
                full_name: "Full Name",
                email: "Email",
                cancel: "Cancel",
                proceed_checkout: "Proceed to Checkout",
                hotel_location: "Ocean Breeze Hotel Location",
                close: "Close",
                no_rooms: "No rooms available for the selected dates, guest count, or filters. Try increasing the price range or adjusting other filters.",
                show_prices: "Show prices"
            },
            fr: {
                check_in_out: "Arrivée – Départ",
                guests_rooms: "Invités & Chambres",
                guests: "Invités",
                rooms: "Chambres",
                search: "Rechercher",
                home: "Accueil",
                filter_by: "Filtrer par",
                price_per_night: "Prix par nuit",
                sort_by: "Trier par",
                price_low_high: "Prix : Croissant",
                price_high_low: "Prix : Décroissant",
                rating_high_low: "Note : Décroissante",
                amenities: "Équipements",
                wifi: "Wi-Fi",
                breakfast: "Petit-déjeuner",
                pool: "Piscine",
                available_rooms: "Chambres disponibles",
                guest_reviews: "Avis des clients",
                excellent_reviews: "Excellent • 1 234 avis",
                verified_reviews: "Avis vérifiés des clients",
                review_1: "Séjour incroyable ! Le personnel était très amical et la chambre impeccable.",
                review_2: "Emplacement idéal et équipements fantastiques. La piscine était un point fort !",
                show_all_reviews: "Voir tous les avis",
                trusted_reviews: "Approuvé par plus de 70 millions d'avis dans le monde",
                about_hotel: "À propos de l'Ocean Breeze Hotel",
                hotel_description: "Niché au cœur de Nairobi, l'Ocean Breeze Hotel offre des hébergements luxueux avec des vues imprenables sur la ville, des équipements modernes et un service exceptionnel. Idéal pour les voyageurs d'affaires ou de loisirs.",
                see_on_map: "Voir sur la carte",
                star_hotel: "Hôtel 4 étoiles",
                book_stay: "Réservez votre séjour",
                room: "Chambre",
                check_in: "Arrivée",
                check_out: "Départ",
                number_of_rooms: "Nombre de chambres",
                full_name: "Nom complet",
                email: "E-mail",
                cancel: "Annuler",
                proceed_checkout: "Passer au paiement",
                hotel_location: "Emplacement de l'Ocean Breeze Hotel",
                close: "Fermer",
                no_rooms: "Aucune chambre disponible pour les dates, le nombre d'invités ou les filtres sélectionnés. Essayez d'augmenter la plage de prix ou d'ajuster les autres filtres.",
                show_prices: "Voir les prix"
            },
            sw: {
                check_in_out: "Kuingia – Kutoka",
                guests_rooms: "Wageni & Vyumba",
                guests: "Wageni",
                rooms: "Vyumba",
                search: "Tafuta",
                home: "Nyumbani",
                filter_by: "Chuja",
                price_per_night: "Bei kwa usiku",
                sort_by: "Panga kwa",
                price_low_high: "Bei: Chini hadi Juu",
                price_high_low: "Bei: Juu hadi Chini",
                rating_high_low: "Ukadiriaji: Juu hadi Chini",
                amenities: "Vistawishi",
                wifi: "Wi-Fi",
                breakfast: "Kiamsha kinywa",
                pool: "Bwawa la kuogelea",
                available_rooms: "Vyumba Vinavyopatikana",
                guest_reviews: "Maoni ya Wageni",
                excellent_reviews: "Bora • Maoni 1,234",
                verified_reviews: "Maoni ya wageni yaliyothibitishwa",
                review_1: "Mkao wa ajabu! Wafanyakazi walikuwa wa kirafiki sana, na chumba kilikuwa safi kabisa.",
                review_2: "Mahali pazuri na vistawishi vya ajabu. Bwawa la kuogelea lilikuwa la kipekee!",
                show_all_reviews: "Ona maoni yote",
                trusted_reviews: "Inaaminika na maoni zaidi ya milioni 70 duniani kote",
                about_hotel: "Kuhusu Hoteli ya Ocean Breeze",
                hotel_description: "Iko katikati ya Nairobi, Hoteli ya Ocean Breeze inatoa malazi ya kifahari yenye maoni ya kupendeza ya jiji, vistawishi vya kisasa, na huduma ya kipekee. Inafaa kwa watalii wa Biashara au Burudani.",
                see_on_map: "Ona kwenye ramani",
                star_hotel: "Hoteli ya nyota 4",
                book_stay: "Weka Nafasi ya Kukaa",
                room: "Chumba",
                check_in: "Kuingia",
                check_out: "Kutoka",
                number_of_rooms: "Idadi ya Vyumba",
                full_name: "Jina Kamili",
                email: "Barua Pepe",
                cancel: "Ghairi",
                proceed_checkout: "Endelea na Malipo",
                hotel_location: "Mahali pa Hoteli ya Ocean Breeze",
                close: "Funga",
                no_rooms: "Hakuna vyumba vinavyopatikana kwa tarehe, idadi ya wageni, au vichujio vilivyochaguliwa. Jaribu kuongeza safu ya bei au kurekebisha vichujio vingine.",
                show_prices: "Ona bei"
            }
        };

        const currencyRates = {
            USD: 1,
            EUR: 0.95,
            KES: 129
        };

        const roomsData = [
            {
                id: 1,
                name: "Standard Room",
                description: "A cozy room with modern amenities, perfect for solo travelers or couples.",
                max_guests: 2,
                price_usd: 120,
                rating: 8.5,
                available_units: 5,
                image: "https://images.unsplash.com/photo-1611892440504-42a792e24d32?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80",
                amenities: [
                    { name: "wifi", icon: "fas fa-wifi" },
                    { name: "breakfast", icon: "fas fa-utensils" },
                    { name: "Air Conditioning", icon: "fas fa-snowflake" },
                    { name: "TV", icon: "fas fa-tv" }
                ],
                size: "25 m²",
                bed_type: "1 Queen Bed",
                view: "City View",
                cancellation: "Free cancellation until 48 hours before arrival",
                unavailable_dates: ["2025-05-10", "2025-05-11"],
                genius_discount: false
            },
            {
                id: 2,
                name: "Deluxe Room",
                description: "Spacious room with a king bed and stunning city views.",
                max_guests: 3,
                price_usd: 180,
                rating: 8.9,
                available_units: 3,
                image: "https://images.unsplash.com/photo-1590490360182-c33d57733427?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80",
                amenities: [
                    { name: "wifi", icon: "fas fa-wifi" },
                    { name: "breakfast", icon: "fas fa-utensils" },
                    { name: "Mini Bar", icon: "fas fa-cocktail" },
                    { name: "Balcony", icon: "fas fa-door-open" }
                ],
                size: "35 m²",
                bed_type: "1 King Bed",
                view: "Ocean View",
                cancellation: "Free cancellation until 24 hours before arrival",
                unavailable_dates: ["2025-05-12"],
                genius_discount: true
            },
            {
                id: 3,
                name: "Executive Suite",
                description: "Luxurious suite with a separate living area and premium amenities.",
                max_guests: 4,
                price_usd: 300,
                rating: 9.2,
                available_units: 2,
                image: "https://images.unsplash.com/photo-1578683014728-903d55d23783?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80",
                amenities: [
                    { name: "wifi", icon: "fas fa-wifi" },
                    { name: "breakfast", icon: "fas fa-utensils" },
                    { name: "Spa Access", icon: "fas fa-spa" },
                    { name: "Living Area", icon: "fas fa-couch" }
                ],
                size: "50 m²",
                bed_type: "1 King Bed + Sofa Bed",
                view: "Panoramic View",
                cancellation: "Non-refundable",
                unavailable_dates: [],
                genius_discount: false
            }
        ];

        let currentCurrency = localStorage.getItem('currency') || 'USD';
        let currentMaxPrice = 500; // Default in USD

        document.addEventListener('DOMContentLoaded', () => {
            try {
                console.log('DOM loaded, initializing with currency:', currentCurrency);

                // Initialize Flatpickr
                const datesInput = document.getElementById('dates');
                if (datesInput) {
                    flatpickr(datesInput, {
                        mode: "range",
                        dateFormat: "Y-m-d",
                        minDate: "today",
                        defaultDate: ["2025-05-07", "2025-05-10"],
                        disable: [
                            function(date) {
                                const dateStr = date.toISOString().split('T')[0];
                                return roomsData.some(room => room.unavailable_dates.includes(dateStr));
                            }
                        ],
                        onChange: function(selectedDates, dateStr) {
                            console.log('Flatpickr onChange:', { selectedDates, dateStr });
                            if (selectedDates.length === 2 && dateStr.includes(' to ')) {
                                updateRoomList(dateStr);
                            }
                        }
                    });
                } else {
                    console.error('Dates input not found');
                }

                // Initialize Guests & Rooms Dropdown
                const guestsRoomsInput = document.getElementById('guests-rooms');
                const guestsRoomsDropdown = document.getElementById('guests-rooms-dropdown');
                if (guestsRoomsInput && guestsRoomsDropdown) {
                    guestsRoomsInput.addEventListener('click', () => {
                        guestsRoomsDropdown.classList.toggle('hidden');
                    });
                    document.addEventListener('click', (e) => {
                        if (!guestsRoomsInput.contains(e.target) && !guestsRoomsDropdown.contains(e.target)) {
                            guestsRoomsDropdown.classList.add('hidden');
                        }
                    });
                }

                const guestsSelect = document.getElementById('guests');
                const roomsSelect = document.getElementById('rooms');
                if (guestsSelect && roomsSelect) {
                    guestsSelect.addEventListener('change', updateGuestsRoomsInput);
                    roomsSelect.addEventListener('change', updateGuestsRoomsInput);
                    updateGuestsRoomsInput();
                }

                function updateGuestsRoomsInput() {
                    const guests = guestsSelect.value || 2;
                    const rooms = roomsSelect.value || 1;
                    const lang = localStorage.getItem('language') || 'en';
                    if (guestsRoomsInput) {
                        guestsRoomsInput.value = `${guests} ${translations[lang].guests}${guests > 1 ? 's' : ''}, ${rooms} ${translations[lang].rooms}${rooms > 1 ? 's' : ''}`;
                    }
                    updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                }

                // Initialize Currency and Language
                const currencyBtn = document.getElementById('currencyBtn');
                const currencyMenu = document.getElementById('currency-menu');
                const currencyLabel = document.getElementById('currencyLabel');
                const languageBtn = document.getElementById('languageBtn');
                const languageMenu = document.getElementById('language-menu');
                const languageLabel = document.getElementById('languageLabel');

                const savedCurrency = localStorage.getItem('currency') || 'USD';
                const savedLanguage = localStorage.getItem('language') || 'en';
                currentCurrency = savedCurrency;
                if (currencyLabel) currencyLabel.textContent = savedCurrency;
                if (languageLabel) {
                    languageLabel.textContent = savedLanguage === 'en' ? 'English' : savedLanguage === 'fr' ? 'Français' : 'Swahili';
                }
                updateLanguage(savedLanguage);
                updatePriceFilterRange();
                updateCurrencyDisplay();
                updateRoomList('2025-05-07 to 2025-05-10');

                if (currencyBtn && currencyMenu) {
                    currencyBtn.addEventListener('click', () => {
                        currencyMenu.classList.toggle('hidden');
                        currencyBtn.setAttribute('aria-expanded', !currencyMenu.classList.contains('hidden'));
                    });
                }
                if (languageBtn && languageMenu) {
                    languageBtn.addEventListener('click', () => {
                        languageMenu.classList.toggle('hidden');
                        languageBtn.setAttribute('aria-expanded', !languageMenu.classList.contains('hidden'));
                    });
                }
                // Currency Switcher
                document.querySelectorAll('[data-currency]').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const currency = item.dataset.currency;
                        console.log('Currency switch triggered:', currency);
                        currentCurrency = currency;
                        if (currencyLabel) currencyLabel.textContent = currency;
                        localStorage.setItem('currency', currency);
                        updatePriceFilterRange();
                        updateCurrencyDisplay();
                        updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                    });
                });

                // Language Switcher
                document.querySelectorAll('[data-lang]').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        const lang = item.dataset.lang;
                        if (languageLabel) {
                            languageLabel.textContent = lang === 'en' ? 'English' : lang === 'fr' ? 'Français' : 'Swahili';
                        }
                        localStorage.setItem('language', lang);
                        updateLanguage(lang);
                        updateGuestsRoomsInput();
                        updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                    });
                });

                function updateLanguage(lang) {
                    document.querySelectorAll('[data-i18n]').forEach(element => {
                        const key = element.dataset.i18n;
                        if (translations[lang] && translations[lang][key]) {
                            element.textContent = translations[lang][key];
                        }
                    });
                }

                function updatePriceFilterRange() {
                    const priceFilter = document.getElementById('priceFilter');
                    const rate = currencyRates[currentCurrency];
                    if (priceFilter) {
                        priceFilter.min = 50 * rate;
                        priceFilter.max = 500 * rate;
                        priceFilter.value = currentMaxPrice * rate;
                        console.log('Price filter updated:', {
                            currency: currentCurrency,
                            min: priceFilter.min,
                            max: priceFilter.max,
                            value: priceFilter.value
                        });
                    }
                }

                function updateCurrencyDisplay() {
                    const rate = currencyRates[currentCurrency];
                    document.querySelectorAll('[data-price]').forEach(element => {
                        const [min, max] = element.dataset.price.split('-').map(Number);
                        const minConverted = (min * rate).toFixed(0);
                        const maxConverted = (max * rate).toFixed(0);
                        element.textContent = `${currentCurrency} ${minConverted} - ${maxConverted}`;
                    });
                }

                // Search Form
                const searchForm = document.getElementById('searchForm');
                if (searchForm) {
                    searchForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const dates = document.getElementById('dates')?.value;
                        if (dates && dates.includes(' to ')) {
                            updateRoomList(dates);
                        } else {
                            alert('Please select both check-in and check-out dates.');
                        }
                    });
                }

                // Booking Form
                const bookingForm = document.getElementById('bookingForm');
                if (bookingForm) {
                    bookingForm.addEventListener('submit', function(e) {
                        e.preventDefault();
                        const roomName = document.getElementById('roomName')?.value;
                        const checkIn = document.getElementById('checkIn')?.value;
                        const checkOut = document.getElementById('checkOut')?.value;
                        const guests = document.getElementById('guests')?.value;
                        const roomsCount = document.getElementById('roomsCount')?.value;
                        const guestName = document.getElementById('guestName')?.value;
                        const guestEmail = document.getElementById('guestEmail')?.value;
                        if (roomName && checkIn && checkOut && guests && roomsCount && guestName && guestEmail) {
                            alert(`Booking ${roomsCount} ${roomName} for ${guestName} (${guestEmail}), ${guests} guest(s) from ${checkIn} to ${checkOut}`);
                            closeModal();
                        } else {
                            alert('Please fill out all required fields.');
                        }
                    });
                }

                // Price Filter
                const priceFilter = document.getElementById('priceFilter');
                const priceValue = document.getElementById('priceValue');
                if (priceFilter && priceValue) {
                    priceFilter.addEventListener('input', debounce(function(e) {
                        currentMaxPrice = e.target.value / currencyRates[currentCurrency];
                        updateCurrencyDisplay();
                        updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                    }, 300));
                }

                // Sort By
                const sortBy = document.getElementById('sortBy');
                if (sortBy) {
                    sortBy.addEventListener('change', function() {
                        updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                    });
                }

                // Amenities Checkboxes
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        updateRoomList(document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10');
                    });
                });

                // Room List Click
                const roomList = document.getElementById('roomList');
                if (roomList) {
                    roomList.addEventListener('click', (e) => {
                        const button = e.target.closest('.btn-show-prices');
                        if (button) {
                            const roomId = button.dataset.roomId;
                            const dates = document.getElementById('dates')?.value || '2025-05-07 to 2025-05-10';
                            const [checkIn, checkOut] = dates.split(' to ');
                            const guests = parseInt(document.getElementById('guests')?.value || 2);
                            const rooms = parseInt(document.getElementById('rooms')?.value || 1);
                            if (roomId && checkIn && checkOut) {
                                openBookingModal(parseInt(roomId), checkIn, checkOut, guests, rooms);
                            } else {
                                alert('Please select valid dates and try again.');
                            }
                        }
                    });
                }
            } catch (error) {
                console.error('Initialization error:', error);
            }
        });

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        async function updateRoomList(dates) {
            try {
                const spinner = document.getElementById('spinner');
                const roomList = document.getElementById('roomList');
                if (!spinner || !roomList) {
                    console.error('Spinner or roomList element not found');
                    return;
                }

                spinner.classList.remove('hidden');
                roomList.classList.add('opacity-50');
                roomList.innerHTML = '';

                await new Promise(resolve => setTimeout(resolve, 500));

                const guests = parseInt(document.getElementById('guests')?.value || 1);
                const rooms = parseInt(document.getElementById('rooms')?.value || 1);
                const maxPrice = currentMaxPrice; // In USD
                const sortBy = document.getElementById('sortBy')?.value || 'price-asc';
                const selectedAmenities = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value.toLowerCase());
                const lang = localStorage.getItem('language') || 'en';

                console.log('Updating room list:', { currency: currentCurrency, dates, guests, rooms, maxPrice, selectedAmenities });

                let checkIn = null, checkOut = null;
                if (dates && dates.includes(' to ')) {
                    [checkIn, checkOut] = dates.split(' to ');
                }

                let availableRooms = roomsData.filter(room => {
                    try {
                        if (room.max_guests < guests) return false;
                        if (room.available_units < rooms) return false;
                        const priceInUSD = room.price_usd;
                        if (priceInUSD > maxPrice) return false;
                        if (selectedAmenities.length > 0) {
                            return selectedAmenities.every(amenity => room.amenities.some(a => a.name === amenity));
                        }
                        if (checkIn && checkOut) {
                            const dateRange = getDateRange(checkIn, checkOut);
                            return !dateRange.some(date => room.unavailable_dates.includes(date));
                        }
                        return true;
                    } catch (error) {
                        console.error('Room filter error:', error);
                        return true;
                    }
                });

                console.log('Filtered rooms:', availableRooms.map(r => r.name));

                availableRooms.sort((a, b) => {
                    const priceA = a.price_usd * currencyRates[currentCurrency];
                    const priceB = b.price_usd * currencyRates[currentCurrency];
                    if (sortBy === 'price-asc') return priceA - priceB;
                    if (sortBy === 'price-desc') return priceB - priceA;
                    if (sortBy === 'rating-desc') return b.rating - a.rating;
                    return 0;
                });

                roomList.innerHTML = availableRooms.length ? availableRooms.map(room => {
                    const price = (room.price_usd * currencyRates[currentCurrency]).toFixed(2);
                    console.log('Rendering room:', room.name, 'Price:', price, 'Currency:', currentCurrency);
                    return `
                        <div class="room-card bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col md:flex-row overflow-hidden">
                            <img src="${room.image}" alt="${room.name}" class="w-full md:w-1/3 h-48 object-cover">
                            <div class="p-4 flex-1">
                                <h3 class="text-xl font-bold text-gray-800">${room.name}</h3>
                                ${room.genius_discount ? '<span class="genius-badge inline-block mt-1">Genius Discount</span>' : ''}
                                <p class="text-gray-600 text-sm mt-2">${room.description}</p>
                                <div class="text-gray-600 text-sm mt-2">
                                    <p><i class="fas fa-ruler-combined mr-1"></i> ${room.size}</p>
                                    <p><i class="fas fa-bed mr-1"></i> ${room.bed_type}</p>
                                    <p><i class="fas fa-eye mr-1"></i> ${room.view}</p>
                                    <p><i class="fas fa-ban mr-1"></i> ${room.cancellation}</p>
                                    <p><i class="fas fa-star mr-1"></i> ${room.rating}/10</p>
                                </div>
                                <ul class="text-gray-600 text-sm mt-2 flex flex-wrap gap-2">
                                    ${room.amenities.map(a => `<li><i class="${a.icon} mr-1"></i> ${translations[lang][a.name] || a.name}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="p-4 flex flex-col justify-between items-end">
                                <p class="text-lg font-bold text-gray-800">${currentCurrency} ${price} <span class="text-sm font-normal">/ night</span></p>
                                <button class="btn-show-prices booking-blue text-white px-4 py-2 rounded-md" data-room-id="${room.id}" aria-label="Show prices for ${room.name}">${translations[lang].show_prices}</button>
                            </div>
                        </div>
                    `;
                }).join('') : `<p class="text-gray-600">${translations[lang].no_rooms}</p>`;

                spinner.classList.add('hidden');
                roomList.classList.remove('opacity-50');
            } catch (error) {
                console.error('updateRoomList error:', error);
                const roomList = document.getElementById('roomList');
                if (roomList) {
                    roomList.innerHTML = `<p class="text-red-600">Error loading rooms. Please try again.</p>`;
                }
            }
        }

        function getDateRange(start, end) {
            const dates = [];
            let current = new Date(start);
            const endDate = new Date(end);
            while (current <= endDate) {
                dates.push(current.toISOString().split('T')[0]);
                current.setDate(current.getDate() + 1);
            }
            return dates;
        }

        function openBookingModal(roomId, checkIn, checkOut, guests, rooms) {
            try {
                if (!checkIn || !checkOut || !guests) {
                    alert('Please select dates and number of guests.');
                    return;
                }
                const room = roomsData.find(r => r.id === roomId);
                const modal = document.getElementById('bookingModal');
                const roomNameInput = document.getElementById('roomName');
                const checkInInput = document.getElementById('checkIn');
                const checkOutInput = document.getElementById('checkOut');
                const guestsInput = document.getElementById('guests');
                const roomsCountSelect = document.getElementById('roomsCount');
                const lang = localStorage.getItem('language') || 'en';

                if (modal && roomNameInput && checkInInput && checkOutInput && guestsInput && roomsCountSelect && room) {
                    roomNameInput.value = room.name;
                    checkInInput.value = checkIn;
                    checkOutInput.value = checkOut;
                    guestsInput.value = guests;
                    roomsCountSelect.innerHTML = Array.from({ length: room.available_units }, (_, i) => `<option value="${i + 1}">${i + 1} ${translations[lang].rooms}${i + 1 > 1 ? 's' : ''}</option>`).join('');
                    roomsCountSelect.value = rooms;
                    modal.classList.remove('hidden');
                } else {
                    console.error('Modal or form elements not found, or room not found:', { roomId });
                }
            } catch (error) {
                console.error('openBookingModal error:', error);
            }
        }

        function closeModal() {
            const modal = document.getElementById('bookingModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }

        function openMapModal() {
            const modal = document.getElementById('mapModal');
            if (modal) {
                modal.classList.remove('hidden');
            }
        }

        function closeMapModal() {
            const modal = document.getElementById('mapModal');
            if (modal) {
                modal.classList.add('hidden');
            }
        }
    </script>
</body>
</html>